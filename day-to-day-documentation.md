## Day 1 (11.02. Evening)
- set up venv
- set up basic folder structure
- made plan and scoping
- set up git

## Day 2 (13.02.)
- implemented database classes in folder models
    - base
    - industry
    - company
    - person
    - usecase
- filled dummy database with dummy data
- tested agent calling - is connection working?
- implemented function call
    - get all use cases from dummy database
    - nothing more
- Agent connection was successfull
- Agent can call the function (get_all_use_cases) and returns them 
- Tested other prompts: 
    - sometimes agent still calls function, yet doesnt include the result in response
    - can filter results by its own (return only healthcare usecases)
- used Claude 3.5 sonnet
- decided to not further test other agents due to time constraints, can be done when encountering problems
- implemented CRUD layer in notebook
    - Class UseCaseService with many functions as
    - get_all_use_cases
    - get_use_case_by_id
    - create_use_case
    - update_use_case
    - update_use_case_status
    - delete_use_case
    - filter_use_cases
    - archive_use_case
    - and some helpers
- copied to python file

# Day 3 (14.02, Midday): 
- documentation and test service functions
- implemented all tools
- implemented run_agent
    - user -> agent call 1 -> tools -> agent call 2 -> done
    - what does not work with this approach is something like: Get use case 5 and based on its industry, create a similar one
    - I dont implement this for now for the following reasons
        - time
        - Not enough experience what happens really, maybe we end in en infite loop or whatever
        - Specs dont state that
        - would probably possible, when adding a history to the chat and ask the agent to do that in multiple input steps
        - rather a nice to have feature, most user woudnt recognize
    - the function currently has no history: 
        if the user gets an agent answer: [...] would you like more details on UC XY. And the User answers "Yes, please", the agent doesnt know what to do. 
    - Plan for now: Test the functionaliyt thouroughly now and integrate history later when it comes to the UI, where this needs to be handled anyway (And there is a place to store it), enlarghement with history is probably not too complex
    - However: identified problem if only specific values are ok, e.g. for the status, typos or germen translation wouldnt work. or if the model tries to input a comapny name to id field.
    - Therefore: Updtaed the tools such that they know what is possible and to translate the user input to their actual intent
    - **Test results**
        - Show me all use cases -> good
        - Tell me about use case number 1 -> good
        - Show me all use cases with status 'new' -> good
        - Change use case 1 to status 'in_progress' -> good BUT: Update did work but the agent mentions that the user can see the details above, which was only visible to the agent for second call -> minor problem, I will solve it later if time (TODO)
        - Create a new use case called 'Test Agent Integration' for company 1 in industry 2 -> good
        - Bitte setze Use Case 1 auf Status 'In Bewertung' -> good
        - Show me use cases that are 'in progres' -> good
        - Filter nach Status abgeschlossen -> good
        - Mark use case 2 as done -> good
        - Set use case 3 to 'reviewing' -> good
        - Show me all use cases in industry 1 that are approved -> good
        - Erstelle einen neuen Use Case 'Test Deutsch' für Firma 1 in Branche 1 mit Status 'genehmigt' -> good
    - Overall the agent is performing well enough, hoewever, there are a few **open problems**:
        - If user asks the agent: show all use cases related to IT? The agent cannot really solve that problem
            - He could use get_all_use_cases and try some interpretation, however, this is a rather hacky way
            - It is also observed, that the agent just puts in some random industry id and returns that, which it entirely wrong.
            - Rather, he should filter for industry_id == 2 (or what ever) and return the relevant use cases
            - Currently, this is not possible, therefore the approach is:
                - add some more database service functions (as get_industries, get_companies, get_persons)
                - add the tool interfaces
                - make the agent call a 3-step procedure: User input -> Call 1 -> results -> Call 2 -> result -> Call 3 = final answer
                - I dont want to let the agent call infinite times in a kind of "while (problem_unsolved)" procedure, this seems too risky and I dont have time for this
    Therefore:
    - Added new functions to database interaction and tested them
        - get_all_industries
        - get_all_companies
        - get_all_persons
        - get_persons_by_use_case
    - added the respective tools and mappings to the agent, and expicitly named the procedure of this function needs to be called first in order to find out the comany's ID ...
    - updated function run_agent by argument "max_rounds". This argument sets the maximum number of iterations the agent may take to review database and piece together the information the user asked for
    - this was then for tests set to 2, and tested
        - Show me all energy related use cases -> ROUND 1: get_all_industries → finds Energy has ID=1, ROUND 2: filter_use_cases(industry_id=1) → returns 4 Energy use cases
        - What use cases does Siemens Energy have? -> ROUND 1: get_all_companies → finds Siemens Energy has ID=1, ROUND 2: filter_use_cases(company_id=1) → returns 2 Siemens use cases
        - Who contributed to use case number 1? -> ROUND 1: get_persons_by_use_case(1) → returns Anna & Michael, ROUND 2: No tools needed
        - Show me what use cases Anna Schmidt worked on -> ROUND 1: get_all_persons → finds Anna Schmidt has ID=1, ROUND 2: filter_use_cases(person_id=1) → returns Anna's 2 use cases
        - Create a new use case called 'Test Multi-Round' for Bosch -> ROUND 1: get_all_companies → finds Bosch has ID=4, industry_id=2, ROUND 2: create_use_case(company_id=4, industry_id=2) → creates new UC
        - Zeige mir alle Use Cases im Energiesektor -> "Energiesektor" → Energy industry → correct filtering, answer in German

# Day 4 (15.02., Midday):
- Agent interacting with database transferred from notebook to python fikes and run a quick test if that is working in the given folder structure
- added some dummy transcripts to test and develop use case extraction

- Decided procedure for rtrabnscript extraction needs more helper:
    - Idea: Design good promt for one agent to create a new usecase
        - This comes with challenges:
            - How does the agent know comanpy, industry and their IDs?
            - What if those dont exist?
            - Same problem applies for persons
            - Additionally, Persons need to be linked to usecase afterwards
            - Assuming those are already in the database seems boring
        - but the good thing is: Already strong agent developed that could potentionally do this (also in a multi step procedure with first checking what exists otherwise create and so on)
            - needs some more service functions to create everything and link persons,  therefore
                - added those functions to the service layer: create_industry/company/person
            - added tools with descriptions to the agent
            - increated the maximum number of rounds to 10 (necessary to do all checks, like: Is the company/industry/person already existing, if not create them, create use case, link persons to use case)
    - tested the agent with the creation of a use case with only one promt (in the promt all information provided)
        - the agent checked everything
        - created what was necessary 
        - added persons to use case
    - designed prompt for LLM that designs promts for the agent -> Transcript -> LLM -> List of promts
    - the agent get those promts one by one 
        - Does all the adding and checking steps 
- Authentiction procedure
    - Added user class
    - some service functions to add to the database and veryfy user
    - added some dummy users to the test database
    - tested user log in and creation
    - Plan: Simple global user, no session management due to time restrictions

# Day 5 (16.02. Morning):
- Permissions: integrate user/user rights into service layer -> catch permission even if the user asks agent to do one job
    - utils/permission -> simple check function - require_permission(user, action) -> checks if user.role is allowed to perform action, e.g. "write"/"delete"
    - update service methods to use permissions -> calls require_permission with current user (added to methods arguments) and type of action
    - agent tool executor not only needs to call the functions the agent asks but also needs to pass on the current user (global variable)
    - test: worked, reader can only read, maintainer verything but dlete and archive
    - user rights change will be done later
- frontend building
    - added login and register page:
        - two field for email and password
        - login button + register button
        - login authenticates user, register create new user (as reader) and calls auto login
    - built main window step by step: Basic - just login, rough outline of main page
        - header with: Application name, user name, role, (upload transcript field, added later), logout
        - build left side (chat agent) roughly: user input field, send message button, agent response field
        - Added right side: table filled with database data (only id, title, company, status)
    - added history to the agent and integrated passing on history saved in front ent to run_agent function
    - added view use case to table view: eye to click on then all details of the use case are shown in a dialog
    - in this dialog also main attributes of the use case may be changed (by admin and maintainer): title describtion, expected benefit
    - added option to manually create:
        - industry
        - company
        - person
        - use case
    - added option to the use case details view that can assign a person to a use case (person must be in same company)
    - added upload manuscript function field (drag&drop): calls function already implemented process_tanscript
    - various bug fixes asformatting of agents response, Not random positioning of the user input
    - added user management: Admin can see a list of all users and can adapt their roles
    - Solved problem: when the user asks something or transcripts are processed, the UI freezes -> added treads for that
    - added update table function so that not the entire UI needs to be reloaded if the agent performs changes in the database

# Day 6 (Evening, 18.02.):
- Planned UI testing strategy 
- performed many test: see detailed documentation: Test-Documentation.md
- Some minor bugfixes 

# Day 7 (Morning, 20.02.):
- Updated README.md
- set up demo notebook for showing functionality
- tested set up with env creation and fixed requirements.txt